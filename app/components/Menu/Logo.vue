<template>

  <nuxt-link
      aria-label="گروه پرداد"
      id="main-logo"
      ref="logoRef"
      class="fixed z-[60] transition-position transform-gpu flex justify-end"
      :class="[getStyle]"
      :to="{ name: 'index' }"
    >

    <svg ref="svgElement" class="fill-[#000] w-full h-full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" style="enable-background:new 0 0 1280 1280;" xml:space="preserve" viewBox="155 478.49 970.01 323.02">       <g>         <g>           <path d="M155,685.1V531.27h63.29c13.63,0,25.31,2.2,35.05,6.59c9.74,4.39,17.25,10.7,22.52,18.9c5.27,8.21,7.91,17.95,7.91,29.23    c0,11.28-2.64,21.02-7.91,29.23c-5.28,8.21-12.78,14.5-22.52,18.9c-9.75,4.4-21.43,6.59-35.05,6.59h-47.47l12.75-13.4v57.8H155z     M183.57,630.38l-12.75-13.84h46.15c12.6,0,22.09-2.67,28.46-8.02c6.37-5.35,9.56-12.86,9.56-22.52c0-9.81-3.19-17.36-9.56-22.64    c-6.37-5.28-15.86-7.91-28.46-7.91h-46.15l12.75-14.06V630.38z"/>           <path d="M282.9,685.1l69.22-153.83h28.13l69.44,153.83h-29.89l-59.55-138.67h11.43L312.35,685.1H282.9z M358.97,647.14l7.69-17.71    h55.98l7.69,17.71H358.97z"/>           <path d="M469.25,685.1V531.27h63.29c13.62,0,25.31,2.2,35.05,6.59c9.74,4.39,17.25,10.7,22.53,18.9    c5.27,8.21,7.91,17.95,7.91,29.23c0,11.28-2.64,20.99-7.91,29.12c-5.28,8.13-12.79,14.36-22.53,18.68    c-9.75,4.32-21.43,6.48-35.05,6.48h-47.47l12.75-12.97v57.8H469.25z M497.82,630.38l-12.75-13.63h46.15    c12.6,0,22.09-2.71,28.46-8.13c6.37-5.42,9.56-12.97,9.56-22.63c0-9.81-3.18-17.36-9.56-22.64c-6.37-5.28-15.86-7.91-28.46-7.91    h-46.15l12.75-14.06V630.38z M569.9,685.1L531,629.28h30.54l39.12,55.82H569.9z"/>           <path d="M629.89,685.1V531.27h67.25c16.7,0,31.35,3.22,43.95,9.67c12.6,6.45,22.41,15.38,29.45,26.81    c7.03,11.43,10.55,24.91,10.55,40.43c0,15.38-3.52,28.83-10.55,40.33c-7.03,11.5-16.85,20.47-29.45,26.92    c-12.6,6.45-27.25,9.67-43.95,9.67H629.89z M658.46,660.92h37.36c11.57,0,21.57-2.2,30-6.59c8.42-4.39,14.95-10.55,19.56-18.46    c4.62-7.91,6.92-17.14,6.92-27.69c0-10.69-2.31-19.96-6.92-27.8c-4.61-7.84-11.13-13.95-19.56-18.35    c-8.43-4.39-18.42-6.59-30-6.59h-37.36V660.92z"/>           <g>             <polyline points="787.45,684.11 856.68,530.28 884.81,530.28 954.25,684.11 924.36,684.11 864.81,545.44 876.24,545.44     816.9,684.11 787.45,684.11   "/>             <polygon points="863.53,646.16 871.22,628.44 927.19,628.44 934.89,646.16   "/>           </g>           <g>             <path d="M973.81,685.1V531.27h67.25c16.7,0,31.35,3.22,43.95,9.67c12.6,6.45,22.41,15.38,29.45,26.81    c7.03,11.43,10.55,24.91,10.55,40.43c0,15.38-3.52,28.83-10.55,40.33c-7.03,11.5-16.85,20.47-29.45,26.92    c-12.6,6.45-27.25,9.67-43.95,9.67H973.81z M1002.38,660.92h37.36c11.57,0,21.57-2.2,30-6.59c8.42-4.39,14.95-10.55,19.56-18.46    c4.62-7.91,6.92-17.14,6.92-27.69c0-10.69-2.31-19.96-6.92-27.8c-4.61-7.84-11.13-13.95-19.56-18.35    c-8.43-4.39-18.42-6.59-30-6.59h-37.36V660.92z"/>             <g>               <g>                 <path d="M1104.11,478.49v2.88h-5.75v14.38h-2.88v-14.38h-5.75v-2.88H1104.11z M1106.99,478.49h3.59l4.31,7.47l4.31-7.47h3.59     v17.25h-2.88v-12.75l-5.03,8.72l-5.03-8.72v12.75h-2.88V478.49z"/>               </g>             </g>           </g>           <g>             <path d="M159.46,800.95v-66.03h6.98v66.03H159.46z"/>             <path d="M187.95,800.95v-66.03h5.75l45.56,57.35h-3.02v-57.35h6.89v66.03h-5.75l-45.47-57.35h3.02v57.35H187.95z"/>             <path d="M264.64,800.95v-66.03h26.88c7.04,0,13.22,1.4,18.54,4.2c5.31,2.8,9.45,6.68,12.4,11.65c2.96,4.97,4.43,10.69,4.43,17.17     c0,6.48-1.48,12.2-4.43,17.17c-2.96,4.97-7.09,8.85-12.4,11.65c-5.31,2.8-11.49,4.2-18.54,4.2H264.64z M271.62,794.91h19.53     c5.85,0,10.93-1.15,15.23-3.44c4.31-2.29,7.66-5.47,10.05-9.53c2.39-4.06,3.58-8.73,3.58-14.01c0-5.34-1.2-10.03-3.58-14.06     c-2.39-4.02-5.74-7.18-10.05-9.48c-4.31-2.3-9.39-3.44-15.23-3.44h-19.53V794.91z"/>             <path d="M369.15,801.51c-8.43,0-15.06-2.42-19.9-7.26c-4.84-4.84-7.26-12.01-7.26-21.51v-37.83h6.98v37.54     c0,7.8,1.76,13.55,5.28,17.26c3.52,3.71,8.49,5.56,14.9,5.56c6.48,0,11.48-1.85,15-5.56c3.52-3.71,5.28-9.46,5.28-17.26v-37.54     h6.79v37.83c0,9.5-2.41,16.66-7.22,21.51C384.2,799.09,377.58,801.51,369.15,801.51z"/>             <path d="M435.47,801.51c-4.9,0-9.61-0.8-14.1-2.41c-4.5-1.6-7.97-3.66-10.42-6.18l2.74-5.38c2.33,2.26,5.46,4.17,9.39,5.71     c3.93,1.54,8.07,2.31,12.4,2.31c4.15,0,7.53-0.52,10.14-1.56c2.61-1.04,4.53-2.44,5.75-4.2c1.23-1.76,1.84-3.71,1.84-5.85     c0-2.58-0.74-4.65-2.22-6.23c-1.48-1.57-3.41-2.81-5.8-3.73c-2.39-0.91-5.03-1.71-7.92-2.4c-2.89-0.69-5.79-1.43-8.68-2.22     c-2.89-0.78-5.55-1.84-7.97-3.16c-2.42-1.32-4.37-3.07-5.85-5.23c-1.48-2.17-2.22-5.02-2.22-8.54c0-3.27,0.86-6.27,2.59-9.01     c1.73-2.74,4.39-4.94,7.97-6.6c3.58-1.67,8.17-2.5,13.77-2.5c3.71,0,7.39,0.52,11.04,1.56c3.65,1.04,6.79,2.47,9.43,4.29     l-2.36,5.57c-2.83-1.89-5.83-3.27-9.01-4.15c-3.18-0.88-6.24-1.32-9.2-1.32c-3.96,0-7.23,0.53-9.81,1.6     c-2.58,1.07-4.48,2.5-5.71,4.29c-1.23,1.79-1.84,3.82-1.84,6.08c0,2.58,0.74,4.65,2.22,6.23c1.48,1.57,3.43,2.8,5.85,3.68     c2.42,0.88,5.08,1.67,7.97,2.36c2.89,0.69,5.77,1.45,8.63,2.26c2.86,0.82,5.5,1.87,7.92,3.16c2.42,1.29,4.37,3,5.85,5.14     c1.48,2.14,2.22,4.94,2.22,8.4c0,3.21-0.88,6.18-2.64,8.91c-1.76,2.74-4.45,4.94-8.06,6.6     C445.76,800.68,441.13,801.51,435.47,801.51z"/>             <path d="M487.16,800.95v-59.99h-23.2v-6.04h53.39v6.04h-23.2v59.99H487.16z"/>             <path d="M528.47,800.95v-66.03h24.71c5.6,0,10.41,0.9,14.43,2.69c4.02,1.79,7.12,4.37,9.29,7.74c2.17,3.36,3.25,7.44,3.25,12.22     c0,4.65-1.09,8.66-3.25,12.03c-2.17,3.36-5.27,5.94-9.29,7.74c-4.02,1.79-8.84,2.69-14.43,2.69h-20.85l3.11-3.21v24.15H528.47z      M535.45,777.37l-3.11-3.3H553c6.6,0,11.62-1.45,15.05-4.34c3.43-2.89,5.14-6.95,5.14-12.17c0-5.28-1.71-9.37-5.14-12.26     c-3.43-2.89-8.44-4.34-15.05-4.34h-20.66l3.11-3.3V777.37z M573.56,800.95l-16.98-23.96h7.55l17.07,23.96H573.56z"/>             <path d="M596.67,800.95v-66.03h6.98v66.03H596.67z"/>             <path d="M614.59,800.95l30.18-66.03h6.89l30.19,66.03h-7.36l-27.73-61.97h2.83l-27.73,61.97H614.59z M626.48,783.31l2.08-5.66     h38.39l2.08,5.66H626.48z"/>             <path d="M692.79,800.95v-66.03h6.98v59.99h36.98v6.04H692.79z"/>             <path d="M802.02,801.51c-5.03,0-9.67-0.83-13.91-2.5c-4.24-1.66-7.92-4.01-11.04-7.03c-3.11-3.02-5.54-6.57-7.26-10.66     c-1.73-4.09-2.59-8.55-2.59-13.4c0-4.84,0.86-9.31,2.59-13.4c1.73-4.09,4.17-7.64,7.31-10.66c3.14-3.02,6.84-5.36,11.08-7.03     c4.24-1.67,8.88-2.5,13.91-2.5c5.03,0,9.64,0.79,13.82,2.36c4.18,1.57,7.75,3.96,10.71,7.17l-4.34,4.43     c-2.77-2.77-5.82-4.75-9.15-5.94c-3.33-1.19-6.92-1.79-10.75-1.79c-4.09,0-7.85,0.68-11.27,2.03c-3.43,1.35-6.41,3.27-8.96,5.75     c-2.55,2.49-4.53,5.38-5.94,8.68c-1.42,3.3-2.12,6.93-2.12,10.89c0,3.9,0.71,7.52,2.12,10.85c1.41,3.33,3.4,6.24,5.94,8.73     c2.55,2.48,5.53,4.4,8.96,5.75c3.43,1.35,7.15,2.03,11.18,2.03c3.77,0,7.34-0.57,10.71-1.7c3.36-1.13,6.46-3.05,9.29-5.75     l3.96,5.28c-3.15,2.77-6.82,4.86-11.04,6.27C811.01,800.81,806.61,801.51,802.02,801.51z M819.57,792.27v-24.34h6.7v25.19     L819.57,792.27z"/>             <path d="M845.98,800.95v-66.03h24.71c5.6,0,10.41,0.9,14.43,2.69c4.02,1.79,7.12,4.37,9.29,7.74c2.17,3.36,3.25,7.44,3.25,12.22     c0,4.65-1.09,8.66-3.25,12.03c-2.17,3.36-5.27,5.94-9.29,7.74c-4.02,1.79-8.84,2.69-14.43,2.69h-20.85l3.11-3.21v24.15H845.98z      M852.96,777.37l-3.11-3.3h20.66c6.6,0,11.62-1.45,15.05-4.34c3.43-2.89,5.14-6.95,5.14-12.17c0-5.28-1.71-9.37-5.14-12.26     c-3.43-2.89-8.44-4.34-15.05-4.34h-20.66l3.11-3.3V777.37z M891.07,800.95l-16.98-23.96h7.55l17.07,23.96H891.07z"/>             <path d="M943.04,801.51c-4.97,0-9.57-0.83-13.82-2.5c-4.24-1.66-7.92-4.02-11.04-7.07c-3.11-3.05-5.54-6.6-7.26-10.66     c-1.73-4.06-2.59-8.5-2.59-13.35c0-4.84,0.86-9.29,2.59-13.35c1.73-4.06,4.15-7.61,7.26-10.66c3.11-3.05,6.77-5.41,10.99-7.07     c4.21-1.67,8.83-2.5,13.87-2.5c4.97,0,9.56,0.83,13.77,2.5c4.21,1.67,7.88,4.01,10.99,7.03c3.11,3.02,5.53,6.57,7.26,10.66     c1.73,4.09,2.59,8.55,2.59,13.4c0,4.84-0.87,9.31-2.59,13.4c-1.73,4.09-4.15,7.64-7.26,10.66c-3.11,3.02-6.78,5.36-10.99,7.03     C952.6,800.68,948.01,801.51,943.04,801.51z M943.04,795.29c3.96,0,7.62-0.67,10.99-2.03c3.36-1.35,6.29-3.27,8.77-5.75     c2.48-2.48,4.42-5.38,5.8-8.68c1.38-3.3,2.08-6.93,2.08-10.89c0-3.96-0.69-7.59-2.08-10.89c-1.38-3.3-3.32-6.19-5.8-8.68     c-2.48-2.48-5.41-4.4-8.77-5.75c-3.36-1.35-7.03-2.03-10.99-2.03c-3.96,0-7.64,0.68-11.04,2.03c-3.4,1.35-6.34,3.27-8.82,5.75     c-2.48,2.49-4.43,5.38-5.85,8.68c-1.42,3.3-2.12,6.93-2.12,10.89c0,3.9,0.71,7.52,2.12,10.85c1.41,3.33,3.36,6.24,5.85,8.73     c2.48,2.48,5.42,4.4,8.82,5.75C935.4,794.61,939.08,795.29,943.04,795.29z"/>             <path d="M1019.92,801.51c-8.43,0-15.06-2.42-19.9-7.26c-4.84-4.84-7.26-12.01-7.26-21.51v-37.83h6.98v37.54     c0,7.8,1.76,13.55,5.28,17.26c3.52,3.71,8.49,5.56,14.9,5.56c6.48,0,11.48-1.85,15-5.56c3.52-3.71,5.28-9.46,5.28-17.26v-37.54     h6.79v37.83c0,9.5-2.41,16.66-7.22,21.51C1034.96,799.09,1028.34,801.51,1019.92,801.51z"/>             <path d="M1068.03,800.95v-66.03h24.71c5.6,0,10.41,0.9,14.43,2.69c4.02,1.79,7.12,4.37,9.29,7.74c2.17,3.36,3.25,7.44,3.25,12.22     c0,4.65-1.09,8.66-3.25,12.03c-2.17,3.36-5.27,5.96-9.29,7.78c-4.02,1.82-8.84,2.74-14.43,2.74h-20.85l3.11-3.3v24.15H1068.03z      M1075.01,777.37l-3.11-3.4h20.66c6.6,0,11.62-1.43,15.05-4.29c3.43-2.86,5.14-6.9,5.14-12.12c0-5.28-1.71-9.37-5.14-12.26     c-3.43-2.89-8.44-4.34-15.05-4.34h-20.66l3.11-3.3V777.37z"/>           </g>         </g>       </g>     </svg>

  </nuxt-link>

</template>

<script setup>
import { useRoute } from "#app";


import { useGlobalStore } from "~/stores/global.js";

const { getShowLogo, getCurrentSlide, getLoading, getMenuStatus, getThemeObj } = storeToRefs(useGlobalStore())
const route = useRoute()

const svgElement = ref(null)


const getStyle = computed(() => {
  if (getMenuStatus.value === 'OPEN') {

    return 'logo-open'
  }
  if (getLoading.value) {
    return 'logo-loading'
  }
  if (route.name === 'index') {
    if (getCurrentSlide.value === 0 && getShowLogo.value) {
      return 'logo-open-slide'
    }
    return 'logo-default'
  }
  return 'logo-default'
})
// const colorMode = useColorMode()

//Logo anim
const contentTimeLine = ref(null)

const logoAnim = async () => {
  await nextTick()
  if (svgElement.value) {
    const mainGroup = svgElement.value.querySelector('g > g')
    const allChildren = mainGroup.children

    const firstSix = Array.from(allChildren).slice(0, 6)
    const seventh = allChildren[6]

    contentTimeLine.value = new TimelineLite();

    firstSix.forEach((child) => {
      contentTimeLine.value.set(child, { opacity: 0, x: 0 });
    });

    const delay = 0.2;

    contentTimeLine.value.staggerFrom(
      firstSix,
      0.5,
      { x: -40, opacity: 0, ease: Power3.easeOut },
      delay, 0,
    );

    contentTimeLine.value.from(
      seventh,
      0.5,
      { x: -70, opacity: 0, ease: Power3.easeOut },
    );

    contentTimeLine.value.play();
  }

}


onMounted(()=>{
  logoAnim()
})

</script>


<style scoped>
@import "tailwindcss";
/* بیس: فقط پوزیشن */
#main-logo {
  transition-property: all;
  transition-duration: 0.7s;
  transition-timing-function: ease-in-out;
  will-change: all;
}

/* سایز svg جدا با delay */
#main-logo svg {
  transition: all;
  transition-delay: 0.35s; /* نیمه مسیر */
}

/* حالت‌ها با ریسپانسیو */
.logo-default {
  @apply delay-500 lg:top-[calc(4vw+3px)] top-[31px] lg:left-[4vw];
  @apply lg:h-[43px] w-[110px] max-h-[36px]
}

.logo-open {

  @apply delay-500 lg:top-[calc(50vh-14vw)] lg:left-[10vw]  ;
  @apply lg:w-[14vw] w-[110px] max-h-[36px]

}



.logo-loading {
  @apply delay-500 lg:left-[4vw] lg:top-[42vh];
  @apply lg:w-48 w-[110px] max-h-[36px];
}

.logo-open-slide {
  @apply delay-500 lg:top-[35%] lg:left-[7vw];
  @apply lg:w-[14vw];
}
</style>