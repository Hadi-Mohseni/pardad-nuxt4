---
deployment:
  tasks:
    - echo "ğŸš€ Starting Nuxt 4 SSR deployment..."
    - cd /home/pardadgr/nuxt4-git
    - source /home/pardadgr/nodevenv/test-nuxt/20/bin/activate
    - echo "ğŸ“¦ Installing production dependencies..."
    - npm ci --omit=dev
    - echo "ğŸ—ï¸ Building Nuxt SSR project..."
    - npm run build
    - echo "ğŸ“‚ Deploying .output to test.pardad-group.com..."
    - rsync -avh --delete .output/ /home/pardadgr/test.pardad-group.com/.output/
    - echo "ğŸ” Restarting Node.js app via Passenger..."
    - touch /home/pardadgr/test.pardad-group.com/tmp/restart.txt
    - echo "âœ… Deployment completed successfully!"
